(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{130:function(e,t,n){},140:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(33),i=n.n(r),s=(n(130),n(10)),j=n(97),l=n(210),o=n(43),u=n(32),d=n(200),b=n(213),h=n(212),O=n(221),x=n(223),v=n(227),f=n(226),p=n(222),g=n(224),m=n(225),C=n(215),S=n(203),k=n(220),y=n(228),_=n(214),T=n(219),E=n(218),w=n(216),q=n(1),D=function(e){return Object(q.jsxs)(_.a,{open:e.dataOpen,onClose:e.dataClose,children:[Object(q.jsx)(w.a,{children:e.dataTitle}),Object(q.jsx)(E.a,{children:e.dataContent}),Object(q.jsxs)(T.a,{children:[Object(q.jsx)(k.a,{onClick:e.dataClose,children:"\u53d6\u6d88"}),Object(q.jsx)(k.a,{onClick:e.dataSave,children:"\u63d0\u4ea4"})]})]})},P=function(e){return Object(q.jsxs)(_.a,{open:e.open,onClose:e.close,children:[Object(q.jsxs)(w.a,{children:["\u786e\u5b9a\u66f4\u65b0[",e.username,"]\u7684\u5bc6\u94a5"]}),Object(q.jsxs)(T.a,{children:[Object(q.jsx)(k.a,{onClick:e.close,children:"\u53d6\u6d88"}),Object(q.jsx)(k.a,{onClick:e.save,autoFocus:!0,children:"\u786e\u5b9a"})]})]})};function I(){var e=Object(u.b)().enqueueSnackbar,t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)([]),j=Object(s.a)(i,2),l=j[0],o=j[1],d=Object(a.useState)(0),b=Object(s.a)(d,2),_=b[0],T=b[1],E=Object(a.useState)(""),w=Object(s.a)(E,2),P=w[0],I=w[1],z=Object(a.useState)(""),F=Object(s.a)(z,2),G=F[0],L=F[1],N=Object(a.useState)(443),M=Object(s.a)(N,2),U=M[0],W=M[1],B=Object(a.useState)(""),J=Object(s.a)(B,2),A=J[0],H=J[1],R=Object(a.useState)(""),V=Object(s.a)(R,2),K=V[0],Q=V[1],X=Object(a.useState)(0),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],ee=Object(a.useState)(""),te=Object(s.a)(ee,2),ne=te[0],ce=te[1],re=Object(a.useState)(""),ie=Object(s.a)(re,2),se=ie[0],je=ie[1],le=Object(a.useState)(!1),oe=Object(s.a)(le,2),ue=oe[0],de=oe[1],be=function(){I(""),L(""),W(443),H(""),Q(""),$(0),ce("")},he=Object(a.useCallback)((function(){fetch("http://127.0.0.1:8373/api/v1/data/serverlist",{method:"GET"}).then((function(e){return e.json()})).then((function(t){if(1===t.status){var n=t.data;o(n)}else ae.variant="error",e(t.message,ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}),[e]);Object(a.useEffect)((function(){he()}),[he]);var Oe=[];return Oe.push(Object(q.jsx)(h.a,{component:"form",sx:{"& .MuiTextField-root":{m:2,width:"25ch"}},autoComplete:"off",children:Object(q.jsxs)("div",{children:[Object(q.jsx)(S.a,{required:!0,id:"title",label:"\u540d\u79f0",value:P,onChange:function(e){I(e.target.value)}}),Object(q.jsx)(S.a,{required:!0,id:"address",label:"\u670d\u52a1\u5668\u5730\u5740",value:G,onChange:function(e){L(e.target.value)}}),Object(q.jsx)(S.a,{required:!0,id:"port",label:"\u670d\u52a1\u5668\u7aef\u53e3",type:"number",value:U,onChange:function(e){W(e.target.value)}}),Object(q.jsx)(S.a,{required:!0,id:"lan_ip",label:"\u5b50\u7f51\u7f51\u5173",value:A,onChange:function(e){H(e.target.value)}}),Object(q.jsx)(S.a,{required:!0,id:"lan_netmask",label:"\u5b50\u7f51\u63a9\u7801",value:K,onChange:function(e){Q(e.target.value)}}),Object(q.jsx)(S.a,{required:!0,id:"mtu",label:"MTU",type:"number",value:Z,onChange:function(e){$(e.target.value)}}),Object(q.jsx)(S.a,{required:!0,id:"dns",label:"DNS",value:ne,onChange:function(e){ce(e.target.value)}})]})},"serverInput")),Object(q.jsxs)(O.a,{sx:{padding:2},children:[Object(q.jsx)(k.a,{sx:{margin:2},variant:"contained",onClick:function(){return je("\u6dfb\u52a0\u670d\u52a1\u5668"),void de(!0)},children:"\u6dfb\u52a0\u670d\u52a1\u5668"}),Object(q.jsx)(p.a,{component:C.a,children:Object(q.jsxs)(x.a,{children:[Object(q.jsx)(g.a,{children:Object(q.jsxs)(m.a,{children:[Object(q.jsx)(f.a,{align:"center",children:"ID"}),Object(q.jsx)(f.a,{align:"center",children:"\u540d\u79f0"}),Object(q.jsx)(f.a,{align:"center",children:"\u5730\u5740"}),Object(q.jsx)(f.a,{align:"center",children:"\u7aef\u53e3"}),Object(q.jsx)(f.a,{align:"center",children:"\u5b50\u7f51\u7f51\u5173"}),Object(q.jsx)(f.a,{align:"center",children:"\u5b50\u7f51\u63a9\u7801"}),Object(q.jsx)(f.a,{align:"center",children:"MTU"}),Object(q.jsx)(f.a,{align:"center",children:"DNS"}),Object(q.jsx)(f.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(q.jsx)(v.a,{children:l.map((function(t,n){return Object(q.jsxs)(m.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(q.jsx)(f.a,{align:"center",children:t.id}),Object(q.jsx)(f.a,{align:"center",children:t.title}),Object(q.jsx)(f.a,{align:"center",children:t.address}),Object(q.jsx)(f.a,{align:"center",children:t.port}),Object(q.jsx)(f.a,{align:"center",children:t.lan_ip}),Object(q.jsx)(f.a,{align:"center",children:t.lan_netmask}),Object(q.jsx)(f.a,{align:"center",children:t.mtu}),Object(q.jsx)(f.a,{align:"center",children:t.dns}),Object(q.jsx)(f.a,{align:"center",children:Object(q.jsxs)(y.a,{variant:"contained",children:[Object(q.jsx)(k.a,{size:"small",onClick:function(){!function(e){je("\u7f16\u8f91\u670d\u52a1\u5668"),T(e.id),I(e.title),L(e.address),W(e.port),H(e.lan_ip),Q(e.lan_netmask),$(e.mtu),ce(e.dns),r(!0),de(!0)}(t)},children:"\u7f16\u8f91"}),Object(q.jsx)(k.a,{size:"small",variant:"contained",color:"error",onClick:function(){return function(t){var n="http://127.0.0.1:8373/api/v1/server/".concat(t);fetch(n,{method:"DELETE"}).then((function(e){return e.json()})).then((function(n){if(1===n.status){var a=[];for(var c in l){var r=l[c];r.id!==t&&a.push(r)}ae.variant="success",e("\u5220\u9664\u6210\u529f",ae),o(a)}else ae.variant="error",e(n.message,ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}(t.id)},children:"\u5220\u9664"})]})})]},"server-"+t.id)}))})]})}),Object(q.jsx)(D,{dataOpen:ue,dataClose:function(){be(),de(!1)},dataTitle:se,dataContent:Oe,dataSave:c?function(){r(!1);var t={title:P,address:G,port:U,lan_ip:A,lan_netmask:K};0!==Z&&(t.mtu=Z),""!==ne&&(t.dns=ne);var n="http://127.0.0.1:8373/api/v1/server/".concat(_);fetch(n,{method:"PUT",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){1===t.status?(ae.variant="success",e("\u4fee\u6539\u6210\u529f",ae),de(!1),be(),he()):(ae.variant="error",e(t.message,ae))})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}:function(){var t={title:P,address:G,port:U,lan_ip:A,lan_netmask:K};0!==Z&&(t.mtu=Z),""!==ne&&(t.dns=ne);fetch("http://127.0.0.1:8373/api/v1/server",{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){1===t.status?(ae.variant="success",e("\u6dfb\u52a0\u6210\u529f",ae),de(!1),be(),he()):(ae.variant="error",e(t.message,ae))})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}})]})}var z=n(197),F=n(205),G=n(206),L=n(204),N=n(198),M=n(202),U=n(229),W=n(230),B=n(209),J=n(207),A=n(208);function H(){var e=Object(u.b)().enqueueSnackbar,t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)([]),j=Object(s.a)(i,2),l=j[0],o=j[1],d=Object(a.useState)([]),b=Object(s.a)(d,2),_=b[0],T=b[1],E=Object(a.useState)([]),w=Object(s.a)(E,2),I=w[0],H=w[1],R=Object(a.useState)(""),V=Object(s.a)(R,2),K=V[0],Q=V[1],X=Object(a.useState)(!1),Y=Object(s.a)(X,2),Z=Y[0],$=Y[1],ee=Object(a.useState)(!1),te=Object(s.a)(ee,2),ne=te[0],ce=te[1],re=Object(a.useState)(""),ie=Object(s.a)(re,2),se=ie[0],je=ie[1],le=Object(a.useState)(0),oe=Object(s.a)(le,2),ue=oe[0],de=oe[1],be=Object(a.useState)(""),he=Object(s.a)(be,2),Oe=he[0],xe=he[1],ve=Object(a.useState)(""),fe=Object(s.a)(ve,2),pe=fe[0],ge=fe[1],me=Object(a.useState)(!1),Ce=Object(s.a)(me,2),Se=Ce[0],ke=Ce[1],ye=Object(a.useState)(!1),_e=Object(s.a)(ye,2),Te=_e[0],Ee=_e[1],we=Object(a.useState)(25),qe=Object(s.a)(we,2),De=qe[0],Pe=qe[1],Ie=Object(a.useState)([]),ze=Object(s.a)(Ie,2),Fe=ze[0],Ge=ze[1],Le=function(){var t={username:Oe,ip:pe,keepalive:De};t.is_extra=Se?1:0,t.is_server=Te?1:0;var n="http://127.0.0.1:8373/api/v1/node/".concat(se);fetch(n,{method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(t){1===t.status?(ae.variant="success",e("\u6dfb\u52a0\u6210\u529f",ae),$(!1),ce(!1),je(""),de(0),xe(""),ge(""),ke(!1),Ee(!1),Pe(25),Ge([]),Me()):(ae.variant="error",e(t.message,ae)),$(!1)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))},Ne=Object(a.useCallback)((function(){fetch("http://127.0.0.1:8373/api/v1/data/serverlist",{method:"GET"}).then((function(e){return e.json()})).then((function(t){if(1===t.status){var n=t.data;o(n)}else ae.variant="error",e(t.message,ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}),[e]),Me=Object(a.useCallback)((function(){fetch("http://127.0.0.1:8373/api/v1/data/nodelist",{method:"GET"}).then((function(e){return e.json()})).then((function(t){if(1===t.status){var n=t.data;T(n)}else ae.variant="error",e(t.message,ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}),[e]),Ue=Object(a.useCallback)((function(){fetch("http://127.0.0.1:8373/api/v1/data/rulelist",{method:"GET"}).then((function(e){return e.json()})).then((function(t){if(1===t.status){var n=t.data;H(n)}else ae.variant="error",e(t.message,ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}),[e]);Object(a.useEffect)((function(){Ne(),Me(),Ue()}),[Ne,Me,Ue]);var We=[];return c?We.push(Object(q.jsx)(h.a,{sx:{p:2},children:Object(q.jsxs)(L.a,{sx:{minWidth:225},children:[Object(q.jsx)(F.a,{children:"\u89c4\u5219"}),Object(q.jsx)(N.a,{multiple:!0,value:Fe,onChange:function(e){var t=e.target.value;Ge("string"===typeof t?t.split(","):t)},input:Object(q.jsx)(J.a,{label:"Chip"}),renderValue:function(e){return Object(q.jsx)(h.a,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map((function(e){return Object(q.jsx)(A.a,{label:e},e)}))})},MenuProps:{PaperProps:{style:{width:225}}},children:I.map((function(e,t){return Object(q.jsx)(G.a,{value:e.ip,children:e.ip},"rule"+t)}))})]})},"router")):We.push(Object(q.jsx)(h.a,{sx:{flexGrow:1,padding:2},children:Object(q.jsxs)(B.a,{container:!0,direction:"column",justifyContent:"center",alignItems:"center",spacing:3,children:[Object(q.jsx)(B.a,{item:!0,children:Object(q.jsx)(S.a,{required:!0,id:"username",label:"\u540d\u79f0",value:Oe,onChange:function(e){xe(e.target.value)}})}),Object(q.jsx)(B.a,{item:!0,children:Object(q.jsxs)(L.a,{sx:{minWidth:225},children:[Object(q.jsx)(F.a,{children:"\u670d\u52a1\u5668"}),Object(q.jsx)(N.a,{value:se,label:"\u670d\u52a1\u5668",onChange:function(e){je(e.target.value)},children:l.map((function(e,t){return Object(q.jsxs)(G.a,{value:e.id,children:[e.title," - ",e.lan_ip,"/",e.lan_netmask]},"server"+t)}))})]})}),Object(q.jsx)(B.a,{item:!0,children:Object(q.jsx)(S.a,{required:!0,id:"ip",label:"\u5b50\u7f51\u5730\u5740",value:pe,onChange:function(e){ge(e.target.value)}})}),Object(q.jsx)(B.a,{item:!0,children:Object(q.jsx)(S.a,{required:!0,id:"keepalive",label:"\u5fc3\u8df3\u65f6\u95f4",value:De,onChange:function(e){Pe(e.target.value)}})}),Object(q.jsx)(B.a,{item:!0,children:Object(q.jsx)(U.a,{sx:{left:36},children:Object(q.jsx)(W.a,{label:"\u5141\u8bb8\u989d\u5916\u8def\u7531",control:Object(q.jsx)(M.a,{checked:Se,onChange:function(e){ke(e.target.checked)}})})})}),Object(q.jsx)(B.a,{item:!0,children:Object(q.jsx)(U.a,{sx:{left:36},children:Object(q.jsx)(W.a,{label:"\u4f5c\u4e3a\u4e2d\u5fc3\u8282\u70b9",control:Object(q.jsx)(M.a,{checked:Te,onChange:function(e){Ee(e.target.checked)}})})})})]})},"clientInput")),Object(q.jsxs)(O.a,{sx:{padding:2},children:[Object(q.jsx)(k.a,{sx:{margin:2},variant:"contained",onClick:function(){return Q("\u6dfb\u52a0\u8282\u70b9"),r(!1),void $(!0)},children:"\u6dfb\u52a0\u8282\u70b9"}),Object(q.jsx)(p.a,{component:C.a,children:Object(q.jsxs)(x.a,{children:[Object(q.jsx)(g.a,{children:Object(q.jsxs)(m.a,{children:[Object(q.jsx)(f.a,{align:"center",children:"ID"}),Object(q.jsx)(f.a,{align:"center",children:"\u540d\u79f0"}),Object(q.jsx)(f.a,{align:"center",children:"\u670d\u52a1\u5668"}),Object(q.jsx)(f.a,{align:"center",children:"\u5b50\u7f51IP"}),Object(q.jsx)(f.a,{align:"center",children:"\u5bc6\u94a5"}),Object(q.jsx)(f.a,{align:"center",children:"\u9ed8\u8ba4\u8def\u7531"}),Object(q.jsx)(f.a,{align:"center",children:"\u989d\u5916\u8def\u7531"}),Object(q.jsx)(f.a,{align:"center",children:"\u5fc3\u8df3\u65f6\u95f4"}),Object(q.jsx)(f.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(q.jsx)(v.a,{children:_.map((function(t,n){return Object(q.jsxs)(m.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(q.jsx)(f.a,{align:"center",children:t.id}),Object(q.jsx)(f.a,{align:"center",children:t.username}),Object(q.jsx)(f.a,{align:"center",children:t.server_title}),Object(q.jsx)(f.a,{align:"center",children:t.ip}),Object(q.jsx)(f.a,{align:"center",children:Object(q.jsxs)(y.a,{variant:"text",color:0===t.is_server?"primary":"error",children:[Object(q.jsx)(z.a,{disableFocusListener:!0,title:t.prikey,children:Object(q.jsx)(k.a,{children:"\u79c1\u94a5"})}),Object(q.jsx)(z.a,{disableFocusListener:!0,title:t.pubkey,children:Object(q.jsx)(k.a,{children:"\u516c\u94a5"})})]})}),Object(q.jsx)(f.a,{align:"center",children:t.default_rule}),Object(q.jsx)(f.a,{align:"center",children:0===t.is_extra?"\u5426":"\u662f"}),Object(q.jsx)(f.a,{align:"center",children:t.keepalive}),Object(q.jsx)(f.a,{align:"center",children:Object(q.jsxs)(y.a,{variant:"text",children:[Object(q.jsx)(k.a,{size:"small",disabled:0===t.is_extra,onClick:function(){return e=t.server_id,n=t.id,Q("\u589e\u52a0\u8def\u7531"),r(!0),$(!0),de(n),void je(e);var e,n},children:"\u8def\u7531"}),Object(q.jsx)(k.a,{size:"small",onClick:function(){return e=t.server_id,n=t.id,a=t.username,ce(!0),je(e),de(n),void xe(a);var e,n,a},children:"\u66f4\u65b0"}),Object(q.jsx)(k.a,{size:"small",color:"error",onClick:function(){return function(t,n){var a="http://127.0.0.1:8373/api/v1/node/".concat(t,"/").concat(n);fetch(a,{method:"DELETE"}).then((function(e){return e.json()})).then((function(t){if(1===t.status){var a=[];for(var c in _){var r=_[c];r.id!==n&&a.push(r)}ae.variant="success",e("\u5220\u9664\u6210\u529f",ae),T(a)}else ae.variant="error",e(t.message,ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}(t.server_id,t.id)},children:"\u5220\u9664"})]})})]},"server-"+t.id)}))})]})}),Object(q.jsx)(D,{dataOpen:Z,dataClose:function(){$(!1)},dataTitle:K,dataContent:We,dataSave:c?function(){return function(){var t=[],n=function(e){var n=I[e];Fe.forEach((function(e){n.ip===e&&t.push(n.id)}))};for(var a in I)n(a);if(0===t.length)return $(!1),!1;var c="http://127.0.0.1:8373/api/v1/data/userrule/".concat(ue,"?rules=").concat(t);fetch(c,{method:"PUT"}).then((function(e){return e.json()})).then((function(t){1===t.status?(ae.variant="success",e("\u6dfb\u52a0\u8def\u7531",ae)):(ae.variant="error",e(t.message,ae)),$(!1)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}()}:function(){return Le()}}),Object(q.jsx)(P,{open:ne,username:Oe,close:function(){ce(!1)},save:function(){var t="http://127.0.0.1:8373/api/v1/node/".concat(se,"/").concat(ue,"/key");fetch(t,{method:"PUT"}).then((function(e){return e.json()})).then((function(t){1===t.status?(ae.variant="success",e("\u4fee\u6539\u5bc6\u94a5\u6210\u529f",ae),Me()):(ae.variant="error",e(t.message,ae)),ce(!1)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}})]})}var R=n(5),V=Object(R.a)(S.a)({"& .MuiInputBase-input":{fontSize:14,textAlign:"center"}});function K(){var e=Object(u.b)().enqueueSnackbar,t=Object(a.useState)(0),n=Object(s.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)([]),j=Object(s.a)(i,2),l=j[0],o=j[1],d=Object(a.useState)(""),b=Object(s.a)(d,2),h=b[0],_=b[1],T=Object(a.useState)(""),E=Object(s.a)(T,2),w=E[0],D=E[1],P=Object(a.useCallback)((function(){fetch("http://127.0.0.1:8373/api/v1/data/rulelist",{method:"GET"}).then((function(e){return e.json()})).then((function(t){if(1===t.status){var n=t.data;o(n)}else ae.variant="error",e("\u5c1a\u672a\u6dfb\u52a0\u89c4\u5219",ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}),[e]),I=function(e){D(e.target.value)};return Object(a.useEffect)((function(){P()}),[P]),Object(q.jsxs)(O.a,{sx:{padding:2},children:[Object(q.jsxs)(B.a,{container:!0,direction:"row",spacing:"16",sx:{padding:2},children:[Object(q.jsx)(B.a,{item:!0,children:Object(q.jsx)(S.a,{label:"CIDR",value:h,onChange:function(e){_(e.target.value)}})}),Object(q.jsx)(B.a,{item:!0,children:Object(q.jsx)(k.a,{sx:{height:54},size:"large",variant:"contained",onClick:function(){return function(){if(""===h)return ae.variant="error",e("\u8bf7\u8f93\u5165\u89c4\u5219",ae),!1;var t="http://127.0.0.1:8373/api/v1/rule?allowed_ip=".concat(h);fetch(t,{method:"POST"}).then((function(e){return e.json()})).then((function(t){1===t.status?(ae.variant="success",e("\u6dfb\u52a0\u6210\u529f",ae),P(),_("")):(ae.variant="error",e(t.message,ae))})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}()},children:"\u6dfb\u52a0\u89c4\u5219"})})]}),Object(q.jsx)(p.a,{component:C.a,children:Object(q.jsxs)(x.a,{children:[Object(q.jsx)(g.a,{children:Object(q.jsxs)(m.a,{children:[Object(q.jsx)(f.a,{align:"center",children:"ID"}),Object(q.jsx)(f.a,{align:"center",children:"\u8def\u7531"}),Object(q.jsx)(f.a,{align:"center",children:"\u64cd\u4f5c"})]})}),Object(q.jsx)(v.a,{children:l.map((function(t,n){return Object(q.jsxs)(m.a,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[Object(q.jsx)(f.a,{align:"center",children:t.id}),c===t.id?Object(q.jsx)(f.a,{align:"center",children:Object(q.jsx)(V,{sx:{maxWidth:150},size:"small",variant:"standard",value:w,onChange:I})}):Object(q.jsx)(f.a,{align:"center",children:t.ip}),Object(q.jsx)(f.a,{align:"center",children:Object(q.jsxs)(y.a,{variant:"contained",children:[Object(q.jsx)(k.a,{color:c===t.id?"success":"primary",onClick:c===t.id?function(){return function(t){if(""===w)return!1;var n="http://127.0.0.1:8373/api/v1/rule/".concat(t,"?allowed_ip=").concat(w);fetch(n,{method:"PUT"}).then((function(e){return e.json()})).then((function(t){1===t.status?(ae.variant="success",e("\u4fee\u6539\u6210\u529f",ae),P()):(ae.variant="error",e(t.message,ae))})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)})),r(0)}(t.id)}:function(e){return n=t.id,a=t.ip,D(a),void r(n);var n,a},children:c===t.id?"\u786e\u5b9a":"\u7f16\u8f91"}),Object(q.jsx)(k.a,{onClick:function(){!function(t){var n="http://127.0.0.1:8373/api/v1/rule/".concat(t);fetch(n,{method:"DELETE"}).then((function(e){return e.json()})).then((function(n){if(1===n.status){var a=[];for(var c in l){var r=l[c];r.id!==t&&a.push(r)}o(a),ae.variant="success",e("\u5220\u9664\u6210\u529f",ae)}else ae.variant="error",e(n.message,ae)})).catch((function(){ae.variant="error",e("\u670d\u52a1\u9519\u8bef",ae)}))}(t.id)},color:"error",children:"\u5220\u9664"})]})})]},"rule-"+t.id)}))})]})})]})}var Q=n(231),X=n(233),Y=n(232),Z=n(217),$=n(196),ee=n(96);function te(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(""),i=Object(s.a)(r,2),j=i[0],l=i[1],o=Object(u.b)().enqueueSnackbar,d=Object(a.useState)(!1),b=Object(s.a)(d,2),v=b[0],S=b[1],T=function(e){var t=Object(a.useState)(!1),n=Object(s.a)(t,2),c=n[0],r=n[1];return Object(q.jsxs)(_.a,{onClose:e.copyClose,open:e.copyOpen,children:[Object(q.jsx)(w.a,{children:"\u5f53\u524d\u914d\u7f6e"}),Object(q.jsxs)(E.a,{children:[Object(q.jsx)(Z.a,{sx:{whiteSpace:"pre-line"},children:e.copyData}),Object(q.jsx)(ee.CopyToClipboard,{text:e.copyData,onCopy:function(){return r(!0)},children:Object(q.jsx)(k.a,{color:c?"success":"primary",children:c?"\u5df2\u590d\u5236":"\u590d\u5236"})})]})]})},D=Object(a.useCallback)((function(){fetch("http://127.0.0.1:8373/api/v1/data/servergroup",{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(1===e.status){ae.variant="success",o("\u52a0\u8f7d\u5b8c\u6210",ae);var t=e.data;c(t)}else ae.variant="error",o("\u6ca1\u6709\u6570\u636e",ae)})).catch((function(){ae.variant="error",o("\u670d\u52a1\u9519\u8bef",ae)}))}),[o]);Object(a.useEffect)((function(){D()}),[D]);var P=function(e){var t="client";return 1===e.isServer&&(t="server"),Object(q.jsxs)(Q.a,{children:[Object(q.jsxs)(Y.a,{children:[Object(q.jsx)(Z.a,{gutterBottom:!0,variant:"h5",component:"div",color:0===e.isServer?"":"error",children:e.name}),Object(q.jsx)(Z.a,{sx:{mb:1.5},variant:"body2",color:"text.secondary",children:e.lan}),Object(q.jsxs)(Z.a,{sx:{mb:1.5},variant:"body2",color:"text.secondary",children:[e.keepalive,"\u79d2"]}),Object(q.jsx)(Z.a,{variant:"body2",component:"div",children:Object(q.jsxs)(y.a,{variant:"contained",size:"small",color:"success",children:[Object(q.jsx)(z.a,{disableFocusListener:!0,title:e.prikey,children:Object(q.jsx)(k.a,{children:"\u79c1\u94a5"})}),Object(q.jsx)(z.a,{disableFocusListener:!0,title:e.pubkey,children:Object(q.jsx)(k.a,{children:"\u516c\u94a5"})})]})})]}),Object(q.jsx)(X.a,{children:Object(q.jsx)(k.a,{onClick:function(){return function(e,t,n){var a="type=".concat(e,"&server=").concat(t,"&node=").concat(n),c="http://127.0.0.1:8373/api/v1/data/config?".concat(a);fetch(c,{method:"GET"}).then((function(e){return e.json()})).then((function(e){if(1===e.status){ae.variant="success",o("\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6\u6210\u529f",ae);var t=e.data;l(t),S(!0)}})).catch((function(){ae.variant="error",o("\u670d\u52a1\u9519\u8bef",ae)}))}(t,e.serverName,e.name)},children:"\u67e5\u770b\u914d\u7f6e"})})]})};return Object(q.jsxs)(O.a,{maxWidth:"xl",children:[n.map((function(e,t){return Object(q.jsxs)(O.a,{maxWidth:"sm",sx:{py:1},children:[Object(q.jsx)(p.a,{component:C.a,children:Object(q.jsx)(x.a,{children:Object(q.jsxs)(g.a,{children:[Object(q.jsxs)(m.a,{children:[Object(q.jsx)(f.a,{children:"\u670d\u52a1\u5668\u540d\u79f0"}),Object(q.jsx)(f.a,{align:"right",children:e.server_title})]}),Object(q.jsxs)(m.a,{children:[Object(q.jsx)(f.a,{children:"\u670d\u52a1\u5668\u5730\u5740"}),Object(q.jsx)(f.a,{align:"right",children:e.server_endpoint})]}),Object(q.jsxs)(m.a,{children:[Object(q.jsx)(f.a,{children:"\u670d\u52a1\u5668\u5b50\u7f51"}),Object(q.jsx)(f.a,{align:"right",children:e.server_lan})]})]})})}),Object(q.jsx)(h.a,{sx:{flexGrow:1,py:2},children:Object(q.jsx)(B.a,{container:!0,direction:"row",justifyContent:"flex-start",alignItems:"center",spacing:2,children:e.users.map((function(t,n){return Object(q.jsx)(B.a,{item:!0,xs:4,md:6,children:""!==t.user_name?Object(q.jsx)(P,{isServer:t.user_is_server,name:t.user_name,serverName:e.server_title,lan:t.user_lan,keepalive:t.user_keepalive,prikey:t.user_prikey,pubkey:t.user_pubkey}):Object(q.jsx)(Z.a,{variant:"h5",color:"error",children:"\u6682\u65e0\u5ba2\u6237\u7aef"})},"nodeCard"+n)}))})}),Object(q.jsx)($.a,{})]},"serverCard"+t)})),Object(q.jsx)(T,{copyOpen:v,copyClose:function(){S(!1)},copyData:j})]})}var ne=Object(j.a)({palette:{primary:{main:o.a[800]}}}),ae={autoHideDuration:1e3,anchorOrigin:{vertical:"top",horizontal:"center"}};function ce(){var e=Object(a.useState)(0),t=Object(s.a)(e,2),n=t[0],c=t[1],r=[{label:"\u603b\u89c8",comp:Object(q.jsx)(te,{})},{label:"\u8282\u70b9",comp:Object(q.jsx)(H,{})},{label:"\u670d\u52a1\u5668",comp:Object(q.jsx)(I,{})},{label:"\u89c4\u5219",comp:Object(q.jsx)(K,{})}];return Object(q.jsx)(l.a,{theme:ne,children:Object(q.jsx)(u.a,{maxSnack:3,children:Object(q.jsxs)(h.a,{sx:{width:"100%"},children:[Object(q.jsx)(h.a,{sx:{borderBottom:1,borderColor:"divider"},children:Object(q.jsx)(d.a,{value:n,onChange:function(e,t){c(t)},centered:!0,children:r.map((function(e,t){return Object(q.jsx)(b.a,{id:"simple-tab-"+t,label:e.label,"aria-controls":"simple-tabpanel-"+t},"simple-tab-"+t)}))})}),r[n].comp]})})})}var re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,236)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))};i.a.render(Object(q.jsx)(c.a.StrictMode,{children:Object(q.jsx)(ce,{})}),document.getElementById("root")),re()}},[[140,1,2]]]);
//# sourceMappingURL=main.88ecd825.chunk.js.map